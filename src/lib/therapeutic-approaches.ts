/**
 * מאגר ידע קליני - גישות טיפוליות
 * Clinical Knowledge Base - Therapeutic Approaches
 * 
 * גרסה 3.0 - 7 גישות מעמיקות
 * 
 * כל גישה כוללת:
 * - רקע תיאורטי ומושגי מפתח (עם הסבר פשוט בעברית למטפל המתחיל)
 * - כללי זיהוי "אם X → בדוק Y" (סימנים מחשידים)
 * - סולם הערכה כמותי (1-10)
 * - נקודות השקה עם גישות אחרות (לאינטגרציה)
 * - רגישות תרבותית
 * 
 * כללי שפה: עברית ראשונה, אנגלית בסוגריים. כל מונח אקדמי מלווה בהסבר פשוט.
 */

// ╔══════════════════════════════════════════════════╗
// ║                   טיפוסים                        ║
// ╚══════════════════════════════════════════════════╝

export interface TherapeuticApproach {
  id: string;
  nameHe: string;
  nameEn: string;
  category: string;
  descriptionHe: string;
  descriptionEn: string;
  prompt: string;
  scale: {
    nameHe: string;
    nameEn: string;
    description: string;
  };
}

export interface CrossApproachInsight {
  approaches: [string, string];
  insightHe: string;
}

// ╔══════════════════════════════════════════════════╗
// ║                  קטגוריות                        ║
// ╚══════════════════════════════════════════════════╝

export const APPROACH_CATEGORIES = [
  { id: 'psychodynamic', nameHe: 'פסיכואנליטית / פסיכודינמית', nameEn: 'Psychoanalytic / Psychodynamic' },
  { id: 'cbt', nameHe: 'קוגניטיבית-התנהגותית', nameEn: 'Cognitive-Behavioral' },
  { id: 'humanistic', nameHe: 'הומניסטית / אקזיסטנציאלית', nameEn: 'Humanistic / Existential' },
];

// ╔══════════════════════════════════════════════════╗
// ║            7 גישות טיפוליות מעמיקות              ║
// ╚══════════════════════════════════════════════════╝

export const THERAPEUTIC_APPROACHES: TherapeuticApproach[] = [

  // ================================================================
  //  1. בק - טיפול קוגניטיבי-התנהגותי (CBT)
  // ================================================================
  {
    id: 'beck-cbt',
    nameHe: 'בק - טיפול קוגניטיבי-התנהגותי',
    nameEn: 'Beck - Cognitive Behavioral Therapy',
    category: 'cbt',
    descriptionHe: 'מחשבות אוטומטיות, עיוותים קוגניטיביים, אמונות ליבה, מעגלי תחזוקה',
    descriptionEn: 'Automatic thoughts, cognitive distortions, core beliefs, maintenance cycles',
    scale: {
      nameHe: 'גמישות קוגניטיבית',
      nameEn: 'Cognitive Flexibility',
      description: 'עד כמה המטופל מסוגל לזהות עיוותים בחשיבה שלו ולאתגר אותם',
    },
    prompt: `
# בק - טיפול קוגניטיבי-התנהגותי
# Beck - Cognitive Behavioral Therapy (CBT)

## רקע תיאורטי:
אהרון בק פיתח את הטיפול הקוגניטיבי בשנות ה-60. הגישה מתמקדת בהווה, מובנית, וממוקדת מטרה.
העיקרון המרכזי: לא האירוע עצמו גורם לרגש, אלא הפרשנות שלנו לאירוע.

## מודל ABC - הבסיס:
- A - אירוע מעורר (Activating Event) - מה קרה בפועל
- B - מחשבות ואמונות (Beliefs) - מה אמרנו לעצמנו על מה שקרה
- C - תוצאות (Consequences) - מה הרגשנו ועשינו בעקבות המחשבות

## מושגים מרכזיים:

### 1. מחשבות אוטומטיות (Automatic Thoughts) - מחשבות שקופצות לראש מעצמן:
- מהירות, לא רצוניות, לעיתים לא מודעות
- הן מרגישות "אמיתיות" למרות שלא תמיד מבוססות
- דוגמה: אחרי שחבר לא ענה לטלפון → "הוא לא רוצה לדבר איתי"

### 2. עיוותים קוגניטיביים (Cognitive Distortions) - דרכי חשיבה מעוותות:
- חשיבה שחור-לבן (All-or-Nothing) - "או מושלם או נורא, אין ביניים"
- הגזמה קטסטרופלית (Catastrophizing) - "זה יהיה הדבר הכי גרוע שיכול לקרות"
- הכללת יתר (Overgeneralization) - "תמיד ככה, אף פעם לא מצליח"
- קריאת מחשבות (Mind Reading) - "אני יודע בדיוק מה הם חושבים עליי"
- שיפוט רגשי (Emotional Reasoning) - "אני מרגיש לא שווה, אז כנראה שאני באמת לא שווה"
- תיוג (Labeling) - "אני לוזר" במקום "טעיתי במשהו ספציפי"
- האשמה עצמית (Personalization) - "זה בגללי" גם כשלא קשור אליי
- מסנן שלילי (Mental Filter) - להתמקד רק בשלילי ולהתעלם מכל השאר
- פסילת החיובי (Discounting the Positive) - "ההצלחה הזאת לא נחשבת"
- הצהרות חובה (Should Statements) - "הייתי חייב", "היה צריך", "מוכרח"

### 3. אמונות ליבה (Core Beliefs) - אמונות עמוקות ויציבות, כמו "משקפיים" שדרכן רואים הכל:
- על העצמי: "אני לא שווה", "אני חלש", "אני לא אהוב"
- על אחרים: "אנשים לא אמינים", "אנשים ינצלו אותי"
- על העולם: "העולם מסוכן", "שום דבר לא מסתדר"
- נוצרות בילדות, יציבות מאוד, קשות לשינוי

### 4. אמונות ביניים (Intermediate Beliefs) - כללים פנימיים שנגזרים מאמונות ליבה:
- דוגמה: אמונת ליבה "אני לא מספיק טוב" → כלל "אם אטעה, יגלו שאני לא שווה"
- מופיעות כ-"אם... אז..." או "חייב/צריך/מוכרח"

### 5. מעגל תחזוקה (Maintenance Cycle) - איך הבעיה "מזינה את עצמה":
מצב ← מחשבה אוטומטית ← רגש ← התנהגות ← תוצאה ← חיזוק המחשבה המקורית

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל משתמש ב"תמיד", "אף פעם", "כולם", "אף אחד"
  → בדוק הכללת יתר (Overgeneralization)

• אם המטופל מתאר מצב בינוני כ"סוף העולם" או "הכל נגמר"
  → בדוק הגזמה קטסטרופלית (Catastrophizing)

• אם המטופל אומר "אני יודע שהוא/היא חושב/ת ש..."
  → בדוק קריאת מחשבות (Mind Reading)

• אם המטופל מתאר הצלחה אבל ממעיט בערכה ("כל אחד יכול", "זה לא משהו")
  → בדוק פסילת החיובי (Discounting the Positive)

• אם המטופל משתמש הרבה ב"חייב", "צריך", "מוכרח"
  → בדוק הצהרות חובה (Should Statements) - ושאל: האם זה כלל פנימי או ערך אמיתי?

• אם המטופל מגדיר את עצמו במילה אחת שלילית ("אני כישלון", "אני מטומטם")
  → בדוק תיוג (Labeling) - וחפש מתחת את אמונת הליבה

• אם המטופל מתאר הצלחה בעבודה אבל משתמש בשפה רגשית שלילית
  → בדוק ניגוד בין מציאות לפרשנות - סימן לעיוות קוגניטיבי פעיל

• אם המטופל עובר בפתאומיות מנושא כואב להומור או לנושא "קל"
  → בדוק הימנעות קוגניטיבית - מה הנושא שממנו ברח? למה דווקא עכשיו?

• אם המטופל אומר "אני מרגיש ככה, אז זה בטח נכון"
  → בדוק שיפוט רגשי (Emotional Reasoning) - הרגש מוצג כהוכחה

## סולם הערכה: גמישות קוגניטיבית (Cognitive Flexibility) - 1 עד 10:
1-3: נוקשות קוגניטיבית גבוהה - העיוותים שולטים, קושי רב לראות חלופות
4-6: גמישות חלקית - מזהה עיוותים בעזרת המטפל, קושי ליישם לבד
7-10: גמישות גבוהה - מזהה ומאתגר עיוותים באופן עצמאי

## נקודות השקה עם גישות אחרות:
• עם מאהלר: חשיבה "הכל או כלום" עשויה לנבוע מקושי בקביעות אובייקט
• עם קליין: חשיבה שחור-לבן מקבילה לפיצול בפוזיציה הפרנואידית-סכיזואידית
• עם בולבי: אמונות ליבה על עצמי ואחרים מקבילות למודלים פעילים פנימיים
• עם ויניקוט: התאמת יתר ל"כללים" עשויה לשקף עצמי כוזב
• עם קוהוט: אמונות ליבה שליליות על ערך עצמי מקבילות לפציעות נרקיסיסטיות
• עם יאלום: עיוותים קוגניטיביים יכולים להסתיר חרדות אקזיסטנציאליות עמוקות

## רגישות תרבותית:
• "הצהרות חובה" יכולות לשקף ערכים תרבותיים לגיטימיים - אל תסווג ערך כעיוות
• במשפחות שמרניות, "קריאת מחשבות" על ציפיות משפחתיות עשויה להיות מדויקת
• הבחן בין האשמה עצמית לא-בריאה לבין תחושת אחריות בריאה

## מסגרת ניתוח:
שלב 1: זהה את המצב/טריגר - מה קרה?
שלב 2: מפה מחשבות אוטומטיות - מה עלה בראש?
שלב 3: זהה עיוותים קוגניטיביים - איזו "משקפת מעוותת" פועלת?
שלב 4: זהה רגשות ועוצמתם - מה הרגיש (1-10)?
שלב 5: זהה התנהגויות - מה עשה בתגובה?
שלב 6: חפש אמונות ליבה - מה האמונה העמוקה שמזינה את העיוות?
שלב 7: מפה את מעגל התחזוקה - איך הכל מחזק את עצמו?
שלב 8: המלץ על התערבות - מה יכול "לשבור" את המעגל?

## חובה ואסור:
✅ התמקד בהווה ובדפוסי חשיבה נוכחיים
✅ היה קונקרטי ומדיד - תמיד עם דוגמה ספציפית מהטקסט
✅ זהה קשרים בין מחשבות ← רגשות ← התנהגות
✅ הצע פעולות ספציפיות: יומן מחשבות, ניסויים התנהגותיים, שינוי מחשבות
❌ אל תשתמש במונחים פסיכודינמיים (לא "לא-מודע", לא "העברה")
❌ אל תתמקד בעבר הרחוק ללא קשר ברור להווה
❌ אל תהיה מופשט - כל תובנה צריכה דוגמה קונקרטית
`
  },

  // ================================================================
  //  2. מאהלר - הפרדה-אינדיבידואציה
  // ================================================================
  {
    id: 'mahler',
    nameHe: 'מאהלר - הפרדה-אינדיבידואציה',
    nameEn: 'Mahler - Separation-Individuation',
    category: 'psychodynamic',
    descriptionHe: 'שלבי התפתחות, סימביוזה, התקרבות מחדש, קביעות אובייקט',
    descriptionEn: 'Developmental stages, symbiosis, rapprochement, object constancy',
    scale: {
      nameHe: 'הפרדה-אינדיבידואציה',
      nameEn: 'Separation-Individuation',
      description: 'עד כמה המטופל הצליח להפריד את עצמו רגשית ולפתח עצמי עצמאי תוך שמירה על קשר',
    },
    prompt: `
# מאהלר - תיאוריית ההפרדה-אינדיבידואציה
# Mahler - Separation-Individuation Theory

## רקע תיאורטי:
מרגרט מאהלר חקרה את ההתפתחות הפסיכולוגית המוקדמת. התיאוריה מתארת את התהליך
שבו התינוק עובר ממיזוג פסיכולוגי מלא עם האם - לעצמי נפרד ועצמאי.
עיקרון יסוד: "הלידה הפסיכולוגית" אינה חופפת ללידה הביולוגית - היא תהליך של שלוש שנים.

## שלבי ההתפתחות:

### 1. אוטיזם נורמלי (Normal Autism) - לידה עד חודש 1:
- התינוק "עטוף בעצמו", לא מודע לעולם החיצוני

### 2. סימביוזה (Symbiosis) - חודשים 1-5:
- מיזוג - התינוק והאם נתפסים כיחידה אחת, "אחדות כפולה"
- בסיס לכל היחסים העתידיים

### 3. הפרדה-אינדיבידואציה (Separation-Individuation) - חודשים 5-36:
השלב המרכזי, מחולק ל-4 תת-שלבים:

#### 3א. התמיינות (Differentiation) - חודשים 5-10:
- "בקיעה" - התינוק מתחיל להבין שהוא והאם הם שניים
- תחילת חרדת זרים

#### 3ב. תרגול (Practicing) - חודשים 10-16:
- "התאהבות בעולם" - הילד מתרגש מהעצמאות
- תחושת כל-יכולת (כי האם עדיין "שם" ברקע)
- טעינה רגשית (Emotional Refueling) - חוזר לאם "לטעון" ויוצא שוב

#### 3ג. התקרבות מחדש (Rapprochement) - חודשים 16-24 - קריטי!:
- המשבר: הילד מגלה שהוא קטן ופגיע, אך כבר לא רוצה לוותר על העצמאות
- אמביוולנטיות חריפה - רוצה גם קרבה וגם עצמאות בו-זמנית
- "עוקב ובורח" (Shadowing and Darting Away) - רץ מהאם ובורח אליה לסירוגין
- זהו השלב שממנו נובעות רוב הבעיות ביחסים בבגרות

#### 3ד. קביעות אובייקט (Object Constancy) - חודשים 24-36:
- היכולת "לשמור בלב" את האם גם כשהיא לא נוכחת
- היכולת להחזיק ייצוג מורכב - האם היא גם טובה וגם מאכזבת, ובכל זאת אהובה
- היכולת להיות לבד מבלי להתמוטט

## מושגי מפתח נוספים:

### פיצול (Splitting) - לראות אנשים כ"כולו טוב" או "כולו רע":
- קורה כשקביעות האובייקט לא הושגה מספיק
- "הוא מושלם" → "הוא נורא" ללא ביניים

### צרכים סימביוטיים (Symbiotic Needs) - כמיהה להיות "אחד" עם מישהו:
- "בלעדיך אני לא שלם"
- תלות רגשית קיצונית

### חרדת בליעה (Engulfment Anxiety) - פחד "להיבלע" באחר:
- "הקשר חונק אותי", "אני מאבד את עצמי"

### חרדת נטישה (Abandonment Anxiety) - פחד שהאחר ייעלם:
- "אם ארחיק - הוא ייעלם ואישאר לבד"

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל מתנדנד בין "אני חייב אותו" לבין "אני חייב לברוח ממנו"
  → בדוק משבר התקרבות מחדש (Rapprochement Crisis)

• אם המטופל מתאר בן/בת זוג כ"מושלם/ת" או "נורא/ה" ללא גוונים
  → בדוק קושי בקביעות אובייקט (Object Constancy) - חוסר יכולת להחזיק מורכבות

• אם המטופל לא מצליח להיות לבד - תמיד צריך מישהו
  → בדוק צרכים סימביוטיים - אולי "תקוע" בשלב הסימביוזה

• אם המטופל מרגיש "נחנק" מקרבה ובורח מיחסים
  → בדוק חרדת בליעה (Engulfment Anxiety) - פחד מאובדן העצמי

• אם המטופל כועס על מישהו שעזב/התרחק אבל לא מזהה את הפחד מתחת
  → בדוק חרדת נטישה (Abandonment Anxiety) מוסווית בכעס

• אם יחסים מתחילים בהתלהבות עצומה ומתפוררים מהר
  → בדוק דפוס סימביוזה ← אכזבה ← פיצול ← בריחה

• אם המטופל מתאר תחושת "כל-יכולת" או גרנדיוזיות
  → בדוק האם "תקוע" בשלב התרגול (Practicing) - כל-יכולת ללא מבחן מציאות

• אם המטופל עובר בפתאומיות מנושא כואב על יחסים לנושא "בטוח"
  → בדוק הימנעות מחרדת הפרדה - הנושא הכואב מאיים על תחושת הקשר

## סולם הערכה: הפרדה-אינדיבידואציה (Separation-Individuation) - 1 עד 10:
1-3: קושי חמור - תלות סימביוטית או בריחה מכל קשר, פיצול קיצוני
4-6: תהליך חלקי - מתנדנד בין קרבה לריחוק, קביעות אובייקט לא יציבה
7-10: הפרדה בריאה - מסוגל לקרבה ולמרחק, מחזיק ייצוגים מורכבים

## נקודות השקה עם גישות אחרות:
• עם CBT: חשיבה "הכל או כלום" = ביטוי קוגניטיבי של כשל בקביעות אובייקט
• עם קליין: הפוזיציה הפרנואידית-סכיזואידית מקבילה לשלב שלפני קביעות האובייקט
• עם בולבי: חרדת נטישה = הפעלת מערכת התקשרות בלתי בטוחה
• עם ויניקוט: הסימביוזה דורשת "סביבה מחזיקה" (Holding Environment)
• עם קוהוט: צרכים סימביוטיים מקבילים לצרכי עצמי-אובייקט מיזוגיים
• עם יאלום: קושי בהפרדה יכול להסתיר חרדת בדידות אקזיסטנציאלית

## רגישות תרבותית:
• בתרבויות שמדגישות קרבה משפחתית, מעורבות הורית גבוהה אינה בהכרח "סימביוטית"
• אל תפרש חיים עם ההורים בבגרות כ"כישלון בהפרדה" ללא הקשר תרבותי
• קשר הדוק עם הקהילה אינו תלות - הבחן בין שייכות בריאה לבין מיזוג

## מסגרת ניתוח:
שלב 1: זהה באיזה שלב התפתחותי המטופל "תקוע" - מה הראיות?
שלב 2: נתח את ההיסטוריה ההתפתחותית - מה קרה בילדות המוקדמת?
שלב 3: זהה חרדות מרכזיות - נטישה? בליעה? שתיהן?
שלב 4: נתח דפוסי יחסים - איך המטופל "חוזר" על הדפוס ההתפתחותי?
שלב 5: הערך קביעות אובייקט - האם מסוגל להחזיק ייצוג מורכב של אנשים?
שלב 6: נתח את הדינמיקה בטיפול - האם הדפוס חוזר גם ביחס למטפל?

## חובה ואסור:
✅ התייחס לשלבי ההתפתחות הספציפיים
✅ זהה את הקונפליקט עצמאות-קרבה
✅ בחן את איכות קביעות האובייקט
✅ חפש ביטויים של חרדת נטישה וחרדת בליעה
❌ אל תשתמש במונחי CBT
❌ אל תפשט - הדפוסים תמיד מורכבים יותר ממה שנראה
`
  },

  // ================================================================
  //  3. ויניקוט - החזקה ואובייקט מעברי
  // ================================================================
  {
    id: 'winnicott',
    nameHe: 'ויניקוט - החזקה ואובייקט מעברי',
    nameEn: 'Winnicott - Holding & Transitional Object',
    category: 'psychodynamic',
    descriptionHe: 'עצמי אמיתי/כוזב, אם טובה-דיה, מרחב פוטנציאלי, חרדות הכחדה',
    descriptionEn: 'True/false self, good-enough mother, potential space, annihilation anxieties',
    scale: {
      nameHe: 'נגישות לעצמי אמיתי',
      nameEn: 'True Self Access',
      description: 'עד כמה המטופל מצליח לחיות מתוך העצמי האמיתי שלו לעומת עצמי כוזב',
    },
    prompt: `
# ויניקוט - תיאוריית ההתפתחות הרגשית המוקדמת
# Winnicott - Early Emotional Development Theory

## רקע תיאורטי:
דונלד ויניקוט היה רופא ילדים ופסיכואנליטיקאי שהדגיש את חשיבות הסביבה בהתפתחות.
אמירת יסוד: "אין דבר כזה תינוק" - תמיד יש דיאדה: תינוק + מי שמטפל בו.

## מושגים מרכזיים:

### 1. החזקה (Holding) - הרבה מעבר לחיבוק פיזי:
- מכלול הטיפול: סביבה בטוחה, צפויה, ומגיבה
- כולל: טיפול פיזי (Handling), הצגת העולם (Object Presenting), נוכחות (Living With)
- הגנה מפני "פלישות" - חוויות שמאלצות תגובה לפני מוכנות
- בטיפול: המטפל מספק "החזקה" דרך עקביות, אמינות, ולא-שיפוטיות

### 2. אם טובה-דיה (Good-Enough Mother) - דווקא לא מושלמת:
- לא צריכה להיות מושלמת - דווקא כישלונות קטנים ומותאמים מאפשרים צמיחה
- שלושה שלבים: עיסוק אימהי ראשוני → כישלון מדורג → הפסקת התאמה
- "טובה-דיה" = מגיבה מספיק, אבל גם נותנת מרחב ללמוד להתמודד

### 3. עצמי אמיתי (True Self) - הליבה הספונטנית:
- מקור היצירתיות, החיוניות, תחושת ה"אמיתיות"
- מרגיש "חי", "שלם", "אני באמת אני"
- מתפתח כשהסביבה מגיבה לצרכים האמיתיים של הילד

### 4. עצמי כוזב (False Self) - מסכה הגנתית:
- מבנה שנוצר כדי להגן על העצמי האמיתי מסביבה לא בטוחה
- התאמת יתר לציפיות אחרים - "להיות מה שהם רוצים שאהיה"
- מרגיש "ריק", "מזויף", "כאילו אני משחק תפקיד"
- ספקטרום: (1) בריא - פרזנטציה חברתית → (3) פתולוגי - העצמי הכוזב שלט → (5) קיצוני - ניתוק מלא

### 5. אובייקט מעברי (Transitional Object) - החפץ הראשון ש"לא אני ולא אמא":
- השמיכה, הבובה - נמצאים ב"בין" - לא פנימי ולא חיצוני
- צעד ראשון ביצירת מרחב מנטלי עצמאי

### 6. מרחב פוטנציאלי (Potential Space) - "המרחב שבין":
- מרחב שלא פנימי ולא חיצוני - מקום למשחק, ליצירתיות, לחלימה
- הטיפול עצמו הוא "מרחב פוטנציאלי"

### 7. פלישה (Impingement) - חוויה שמאלצת תגובה לפני מוכנות:
- מפריעה ל"רציפות הקיום" (Going-on-Being) - תחושת הזרימה הבסיסית
- ילד שחווה יותר מדי פלישות מפתח עצמי כוזב כהגנה

### 8. חרדות הכחדה (Annihilation Anxieties) - פחדים פרימיטיביים:
- התפרקות (Going to Pieces) - "אני מתפורר/ת"
- נפילה אינסופית (Falling Forever) - תחושת חוסר קרקע
- אובדן קשר לגוף - "לא מרגיש/ה את עצמי"
- בידוד מוחלט - "אף אחד לא ישיג אותי"

### 9. היכולת להיות לבד (Capacity to Be Alone):
- מתפתחת מתוך "להיות לבד בנוכחות האם" - פרדוקס מכונן
- מי שלא חווה את זה - לא יכול להיות לבד בשקט

### 10. שימוש באובייקט (Use of Object) - שלב מתקדם ביחסים:
- ההבדל בין "להתייחס" (Relating) ל"להשתמש" (Using)
- האובייקט חייב "לשרוד" את ההרס - רק אז הוא נתפס כאמיתי

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל "תמיד בסדר" או "אין לי בעיות" אבל בבירור במצוקה
  → בדוק עצמי כוזב (False Self) שולט - הוא מציג מה ש"צריך" להיות

• אם הישגים של המטופל מרגישים לו "ריקים" או "לא שלי"
  → בדוק ניתוק בין עצמי כוזב (שמשיג) לבין עצמי אמיתי (שלא משתתף)

• אם המטופל לא יכול לומר מה הוא באמת רוצה
  → בדוק דיכוי של העצמי האמיתי - אולי מעולם לא למד שרצונותיו לגיטימיים

• אם המטופל מרגיש "מת מבפנים" למרות שמתפקד היטב
  → בדוק עצמי כוזב ברמה גבוהה - המסכה עובדת אבל האדם "לא שם"

• אם המטופל חווה התקפי חרדה כש"שום דבר לא קורה"
  → בדוק שבר ברציפות הקיום (Going-on-Being) - החרדה היא חרדת הכחדה

• אם המטופל מתאר ילדות שבה "הייתי צריך להסתדר לבד מוקדם מדי"
  → בדוק התפתחות מוקדמת מדי של אגו (Premature Ego Development) בגלל פלישות

• אם המטופל מגיב בזעם או בנסיגה כשהמטפל טועה או לא מבין
  → בדוק האם האובייקט (המטפל) "שורד" את ההרס - רגע טיפולי קריטי

## סולם הערכה: נגישות לעצמי אמיתי (True Self Access) - 1 עד 10:
1-3: עצמי כוזב שולט - חיים "ריקים", ניתוק מרצונות אותנטיים
4-6: עצמי אמיתי צץ לפעמים - רגעי ספונטניות אך עדיין הרבה "משחק תפקיד"
7-10: עצמי אמיתי נגיש - חי מתוך אותנטיות, מסוגל ליצירתיות וספונטניות

## נקודות השקה עם גישות אחרות:
• עם מאהלר: ההחזקה (Holding) = הבסיס לסימביוזה בריאה, מאפשרת הפרדה בטוחה
• עם קליין: הפוזיציה הדפרסיבית = יכולת לדאגה (Concern), שהיא צמיחת העצמי האמיתי
• עם בולבי: בסיס בטוח (Secure Base) = סביבה מחזיקה (Holding Environment)
• עם קוהוט: עצמי אמיתי דומה ל"עצמי גרעיני" (Nuclear Self), עצמי כוזב = מבנה הגנתי נרקיסיסטי
• עם יאלום: אותנטיות (יאלום) = חיים מתוך העצמי האמיתי (ויניקוט)

## רגישות תרבותית:
• "עצמי כוזב" ברמה קלה הוא נורמלי בכל תרבות - פרזנטציה חברתית
• בתרבויות קולקטיביסטיות, התאמה לקבוצה אינה בהכרח "עצמי כוזב"
• אל תבלבל בין ענווה תרבותית לדיכוי העצמי האמיתי

## מסגרת ניתוח:
שלב 1: הערך את המאזן עצמי אמיתי / כוזב - כמה מהמטופל "באמת שם"?
שלב 2: נתח היסטוריית החזקה - האם הייתה סביבה "טובה-דיה"?
שלב 3: בחן יכולת להיות לבד - האם הבדידות מאיימת?
שלב 4: בחן את המרחב הפוטנציאלי - האם יש מקום למשחק, יצירתיות?
שלב 5: חפש חרדות פרימיטיביות - מה "מאיים" ברמה העמוקה?
שלב 6: נתח את הדינמיקה הטיפולית - האם המטפל מספק "החזקה"?

## חובה ואסור:
✅ חפש את הדיאלקטיקה עצמי אמיתי / כוזב
✅ שים לב לחרדות פרימיטיביות (הכחדה)
✅ בחן את איכות ההחזקה - בעבר ובטיפול
❌ אל תתייחס ל"עצמי כוזב" כ"שקר" מוסרי - הוא הישרדותי
❌ אל תדחק לספונטניות - העצמי האמיתי צריך סביבה בטוחה כדי לצוץ
`
  },

  // ================================================================
  //  4. בולבי - תיאוריית ההתקשרות
  // ================================================================
  {
    id: 'bowlby',
    nameHe: 'בולבי - תיאוריית ההתקשרות',
    nameEn: 'Bowlby - Attachment Theory',
    category: 'psychodynamic',
    descriptionHe: 'סגנונות התקשרות, מודלים פעילים פנימיים, בסיס בטוח, נמל מבטחים',
    descriptionEn: 'Attachment styles, internal working models, secure base, safe haven',
    scale: {
      nameHe: 'ביטחון התקשרותי',
      nameEn: 'Attachment Security',
      description: 'עד כמה המטופל מצליח ליצור ולשמר קשרים בטוחים ויציבים',
    },
    prompt: `
# בולבי - תיאוריית ההתקשרות
# Bowlby - Attachment Theory

## רקע תיאורטי:
ג'ון בולבי פיתח את תיאוריית ההתקשרות - אחת התיאוריות המשפיעות ביותר בפסיכולוגיה.
עיקרון יסוד: להתקשרות יש ערך הישרדותי - התינוק "מתוכנת" לחפש קרבה לדמות מגנה.

## מושגים מרכזיים:

### 1. מערכת ההתקשרות (Attachment Behavioral System) - "מערכת אזעקה" פנימית:
- מופעלת בזמן סכנה, מצוקה, או פרידה
- מטרה: שמירה על קרבה לדמות מגנה
- יעד: תחושת ביטחון (Felt Security) - "הכל בסדר, יש מי שישמור עליי"

### 2. מודלים פעילים פנימיים (Internal Working Models - IWMs) - "מפות" של יחסים:
- ייצוגים פנימיים שנבנים בילדות ומשפיעים על כל היחסים
- מודל העצמי: "האם אני ראוי/ה לאהבה?" (חיובי ← "כן" / שלילי ← "אני מעמסה")
- מודל האחר: "האם אחרים זמינים?" (חיובי ← "כן" / שלילי ← "אי אפשר לסמוך")

### 3. סגנונות התקשרות (Attachment Styles):

#### א. התקשרות בטוחה (Secure) - 55-65% מהאוכלוסייה:
- דמות התקשרות שהייתה זמינה ורגישה
- נוחות עם קרבה ועם עצמאות
- יכולת לבקש עזרה ולתת עזרה
- ויסות רגשי גמיש

#### ב. התקשרות חרדה (Anxious-Preoccupied) - 10-15%:
- דמות התקשרות לא עקבית - לפעמים שם, לפעמים לא
- אסטרטגיה: הגברת ההתקשרות (Hyperactivation) - "לצעוק יותר חזק כדי לקבל תשומת לב"
- חרדת נטישה גבוהה, תלות רגשית, רגישות לדחייה
- "אני צריך אותך, אבל אני לא בטוח שאתה באמת שם"

#### ג. התקשרות נמנעת (Avoidant-Dismissing) - 20-25%:
- דמות התקשרות דוחה או לא מגיבה
- אסטרטגיה: השבתת ההתקשרות (Deactivation) - "אני לא צריך אף אחד"
- עצמאות יתר, קושי באינטימיות, ריחוק רגשי
- "אני מסתדר לבד" (אבל בעומק - כואב)

#### ד. התקשרות לא-מאורגנת (Disorganized-Fearful) - 10-15%:
- דמות ההתקשרות הייתה גם מקור פחד וגם מקור נחמה - פרדוקס בלתי פתיר
- קשור לטראומה והתעללות
- התנהגות סותרת ולא קוהרנטית ביחסים
- "אני צריך אותך אבל אני מפחד ממך"

### 4. דמות התקשרות (Attachment Figure) - ארבע פונקציות:
- שמירה על קרבה (Proximity Maintenance) - רוצה להיות קרוב
- נמל מבטחים (Safe Haven) - רץ אליו במצוקה
- בסיס בטוח (Secure Base) - יוצא ממנו לחקור את העולם
- מצוקת פרידה (Separation Distress) - קשה כשנפרדים

### 5. ביטחון נרכש (Earned Security) - תקווה!:
- אפשר לפתח ביטחון בבגרות, למרות ילדות לא בטוחה
- דרך טיפול, יחסים מתקנים, או עיבוד הנרטיב

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל ממעיט בחשיבות יחסים בעודו סובל מבדידות
  → בדוק התקשרות נמנעת (Avoidant) - "אני לא צריך" מסתיר כאב

• אם המטופל מחפש הרגעה בלתי פוסקת מהמטפל או מבן/בת הזוג
  → בדוק התקשרות חרדה (Anxious) - הגברת ההתקשרות כאסטרטגיה

• אם המטופל מתאר רגשות סותרים כלפי אותו אדם - אהבה ופחד ביחד
  → בדוק התקשרות לא-מאורגנת (Disorganized)

• אם המטופל אומר "אני לא צריך אף אחד" בצורה שמרגישה הגנתית
  → בדוק השבתה (Deactivation) - מנגנון של התקשרות נמנעת

• אם המטופל "בוחן" את המטפל - מאחר, מבטל, בודק תגובות
  → בדוק הפעלת מערכת ההתקשרות - הוא בודק "האם אתה באמת שם?"

• אם המטופל מספר על אובדן או פרידה בילדות בלי רגש
  → בדוק ניתוק רגשי (Deactivation) מתכנים התקשרותיים כואבים

• אם המטופל נדבק מהר מאוד באנשים חדשים ואז מתאכזב
  → בדוק חרדת התקשרות - מחפש "בסיס בטוח" בכל מקום

## סולם הערכה: ביטחון התקשרותי (Attachment Security) - 1 עד 10:
1-3: חוסר ביטחון חמור - דפוסים לא-מאורגנים, קושי ביחסים, טראומה התקשרותית
4-6: ביטחון חלקי - סגנון נמנע או חרד דומיננטי, אך יכולת יחסית ליחסים
7-10: ביטחון גבוה / ביטחון נרכש - יחסים יציבים, ויסות רגשי טוב, גמישות

## נקודות השקה עם גישות אחרות:
• עם מאהלר: חרדת נטישה (בולבי) = כישלון בהפרדה בטוחה (מאהלר)
• עם ויניקוט: "בסיס בטוח" (בולבי) = "סביבה מחזיקה" (ויניקוט)
• עם קליין: מודלים פעילים פנימיים = אובייקטים פנימיים טובים/רעים
• עם קוהוט: דמות התקשרות = עצמי-אובייקט (Selfobject), ביטחון נרכש = הפנמה מתמרת
• עם CBT: מודלים פעילים פנימיים = אמונות ליבה על עצמי ואחרים

## רגישות תרבותית:
• סגנון התקשרות מושפע מנורמות תרבותיות - מה שנראה "נמנע" בתרבות אחת עשוי להיות נורמטיבי באחרת
• בתרבויות קולקטיביסטיות, התקשרות "חרדה" עשויה לשקף ערכי קרבה משפחתית ולא פתולוגיה
• אל תפרש "עצמאות" תרבותית כהתקשרות נמנעת ללא ראיות נוספות

## מסגרת ניתוח:
שלב 1: זהה סגנון התקשרות דומיננטי - מה הראיות מדפוסי היחסים?
שלב 2: נתח מודלים פעילים פנימיים - מה המטופל מאמין על עצמו ועל אחרים?
שלב 3: מפה היסטוריית התקשרות - מי היו דמויות ההתקשרות? מה הייתה האיכות?
שלב 4: בחן ביטויים ביחסים נוכחיים - איך הסגנון מתבטא היום?
שלב 5: הערך ויסות רגשי - הגברה? השבתה? לא-מאורגן?
שלב 6: נתח את הקשר הטיפולי - מה קורה עם המטפל?

## חובה ואסור:
✅ זהה סגנון התקשרות עם ראיות קונקרטיות
✅ חפש את האסטרטגיה: הגברה / השבתה / לא-מאורגן
✅ קשר לדפוסי יחסים נוכחיים
❌ אל תתייחס לסגנון כ"גזר דין" - ביטחון נרכש אפשרי תמיד
❌ אל תבלבל בין סגנון התקשרות לאישיות
`
  },

  // ================================================================
  //  5. קליין - יחסי אובייקט
  // ================================================================
  {
    id: 'klein',
    nameHe: 'קליין - יחסי אובייקט',
    nameEn: 'Klein - Object Relations',
    category: 'psychodynamic',
    descriptionHe: 'פוזיציות, פיצול, הזדהות השלכתית, קנאה, תיקון',
    descriptionEn: 'Positions, splitting, projective identification, envy, reparation',
    scale: {
      nameHe: 'השגת הפוזיציה הדפרסיבית',
      nameEn: 'Depressive Position Attainment',
      description: 'עד כמה המטופל מסוגל לראות אנשים כ"שלמים" (גם טובים וגם מאכזבים) ולא כ"כולו טוב/רע"',
    },
    prompt: `
# קליין - תיאוריית יחסי האובייקט
# Klein - Object Relations Theory

## רקע תיאורטי:
מלאני קליין פיתחה גישה ייחודית שמתמקדת בעולם הפנימי - הפנטזיות, הפחדים, והייצוגים
הפנימיים שמלווים אותנו מהלידה. היא האמינה שחיי הפנטזיה מתחילים מיום הראשון.
עיקרון יסוד: מהלידה, התינוק נמצא ביחסים עם "אובייקטים" - ייצוגים פנימיים של אנשים.

## מושגים מרכזיים:

### 1. אובייקט (Object) - לא "חפץ" אלא ייצוג פנימי של אדם:
- אובייקט חיצוני (External Object) - האדם האמיתי בחוץ
- אובייקט פנימי (Internal Object) - הדמות כפי שהיא חיה "בתוכנו"
- אובייקט חלקי (Part Object) - רק חלק מהאדם (למשל: "האמא שמאכילה")
- אובייקט שלם (Whole Object) - האדם המלא, עם הטוב והרע

### 2. הפוזיציה הפרנואידית-סכיזואידית (Paranoid-Schizoid Position) - מצב נפשי פרימיטיבי:
- העולם מחולק: "כולו טוב" מול "כולו רע" - אין גוונים
- לא רק בתינוקות! חוזר בבגרות ברגעי לחץ
- מנגנונים: פיצול, השלכה, הזדהות השלכתית, אידאליזציה
- החרדה: רדיפתית (Persecutory) - "הם רוצים להרוס אותי"

### 3. הפוזיציה הדפרסיבית (Depressive Position) - מצב נפשי בוגר יותר:
- יכולת לראות את האובייקט כ"שלם" - גם טוב וגם מאכזב
- אינטגרציה - "האמא שאני אוהב היא גם האמא שמאכזבת"
- החרדה: דפרסיבית - אשמה, דאגה, פחד שפגעתי באדם שאני אוהב
- יכולת לתיקון (Reparation) - רצון לתקן את מה שפגעתי

### 4. הזדהות השלכתית (Projective Identification) - המושג הכי חשוב!:
- תהליך שבו אדם "שם" חלקים מעצמו (רגשות, מחשבות) בתוך אדם אחר
- וגורם לאחר באמת להרגיש ולהתנהג בהתאם! (לא רק "מדמיין" - משפיע!)
- שלושה שימושים: תקשורת (להעביר חוויה), הגנה (להיפטר מרגש קשה), שליטה
- בטיפול: אם המטפל מרגיש פתאום משהו חזק - אולי זו הזדהות השלכתית

### 5. פיצול (Splitting) - חלוקת העולם לטוב מוחלט ורע מוחלט:
- "היא המכשפה הרעה" / "הוא המלאך" - ללא ביניים
- מגן מפני אמביוולנטיות שקשה לשאת

### 6. קנאה פרימיטיבית (Envy) - רצון להרוס את הטוב שיש לאחר:
- שונה מקנאת יריבות (Jealousy) שהיא "אני רוצה מה שלך"
- קנאה אומרת: "אם אני לא יכול לקבל את הטוב שלך - שלא יהיה לאף אחד"
- מפריעה ליכולת לקבל עזרה ולהפנים טוב

### 7. הכרת תודה (Gratitude) - היכולת להכיר בטוב ולהודות:
- ההיפך מקנאה
- סימן לאובייקטים פנימיים טובים ויציבים

### 8. תיקון (Reparation) - הרצון לתקן נזק שגרמתי:
- סימן להשגת הפוזיציה הדפרסיבית
- "אני מבין שפגעתי ואני רוצה לתקן"

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל מתאר מישהו כ"מושלם" או כ"נורא" ללא גוונים
  → בדוק פיצול (Splitting) - הפוזיציה הפרנואידית-סכיזואידית פעילה

• אם המטפל מרגיש פתאום רגש חזק ולא צפוי (שעמום, כעס, חוסר אונים)
  → בדוק הזדהות השלכתית (Projective Identification) - המטופל "שם" משהו במטפל

• אם המטופל לא מצליח להכיר בעזרה שקיבל או ממעיט בה
  → בדוק קנאה פרימיטיבית (Envy) - הטוב של האחר מאיים

• אם המטופל מרגיש אשם אחרי שכעס על מישהו אהוב
  → בדוק חרדה דפרסיבית (Depressive Anxiety) - סימן חיובי! מעיד על יכולת לדאגה

• אם כל הסיפורים של המטופל הם "אני הקורבן, הם הרעים"
  → בדוק פוזיציה פרנואידית-סכיזואידית - חרדה רדיפתית שולטת

• אם המטופל מאדיר את המטפל ("אתה הכי טוב!") ומשמיץ מטפלים קודמים
  → בדוק אידאליזציה (Idealization) - חלק מפיצול, ייתכן שגם אתה "תיפול"

• אם המטופל מרגיש שהצלחה שלו "גוזלת" ממישהו אחר
  → בדוק אשמה דפרסיבית - פחד שהטוב שלי בא על חשבון האחר

## סולם הערכה: השגת הפוזיציה הדפרסיבית (Depressive Position) - 1 עד 10:
1-3: פוזיציה פרנואידית-סכיזואידית דומיננטית - פיצול קיצוני, חרדה רדיפתית
4-6: מתנדנד בין הפוזיציות - לפעמים אינטגרציה, לפעמים פיצול
7-10: פוזיציה דפרסיבית יציבה - יכולת לדאגה, תיקון, והכרת תודה

## נקודות השקה עם גישות אחרות:
• עם מאהלר: קביעות אובייקט (מאהלר) = השגת הפוזיציה הדפרסיבית (קליין)
• עם ויניקוט: יכולת לתיקון (קליין) = צמיחת העצמי האמיתי (ויניקוט)
• עם בולבי: אובייקטים פנימיים = מודלים פעילים פנימיים
• עם קוהוט: קנאה פרימיטיבית (קליין) קשורה לזעם נרקיסיסטי (קוהוט)
• עם CBT: חשיבה שחור-לבן (CBT) = פיצול (קליין)

## רגישות תרבותית:
• "קנאה" היא מושג רגיש תרבותית - בדוק האם יש הקשר תרבותי
• אידאליזציה של דמויות סמכות עשויה להיות נורמטיבית בתרבויות מסוימות

## מסגרת ניתוח:
שלב 1: זהה את הפוזיציה הדומיננטית - פרנואידית-סכיזואידית או דפרסיבית?
שלב 2: מפה מנגנוני הגנה פרימיטיביים - פיצול? השלכה? הזדהות השלכתית?
שלב 3: מפה את העולם הפנימי - מה "חי" בתוך המטופל? אובייקטים טובים/רעים?
שלב 4: בחן קנאה מול הכרת תודה
שלב 5: בחן יכולת לתיקון - האם יש רצון לתקן?
שלב 6: נתח את הדינמיקה הטיפולית - מה המטפל "קיבל" מהמטופל?

## חובה ואסור:
✅ השתמש במונחים של קליין - פוזיציות, פיצול, הזדהות השלכתית
✅ שים לב למה שהמטפל חווה - זה מידע קליני חשוב!
✅ חפש תנועה בין הפוזיציות
❌ אל תתייחס לפוזיציות כ"שלבים" - הם מצבים שמתנדנדים ביניהם כל החיים
❌ אל תתעלם מהפנטזיה הלא-מודעת - היא המנוע של הכל בגישה הזו
`
  },

  // ================================================================
  //  6. קוהוט - פסיכולוגיית העצמי
  // ================================================================
  {
    id: 'kohut',
    nameHe: 'קוהוט - פסיכולוגיית העצמי',
    nameEn: 'Kohut - Self Psychology',
    category: 'psychodynamic',
    descriptionHe: 'עצמי-אובייקט, שיקוף, אידאליזציה, פציעה נרקיסיסטית, לכידות עצמית',
    descriptionEn: 'Selfobject, mirroring, idealizing, narcissistic injury, self-cohesion',
    scale: {
      nameHe: 'לכידות עצמית',
      nameEn: 'Self-Cohesion',
      description: 'עד כמה העצמי של המטופל "שלם ויציב" לעומת "שביר ומתפרק"',
    },
    prompt: `
# קוהוט - פסיכולוגיית העצמי
# Kohut - Self Psychology

## רקע תיאורטי:
היינץ קוהוט פיתח את פסיכולוגיית העצמי בשנות ה-70. הגישה מתמקדת בחוויית העצמי -
תחושת הערך, הלכידות, והחיוניות של האדם. הנרקיסיזם בגישה הזו אינו "מחלה" אלא
צורך אנושי בסיסי שכולנו זקוקים לו לאורך כל החיים.
עיקרון יסוד: אנחנו תמיד זקוקים לאנשים שמספקים פונקציות מסוימות לעצמי שלנו -
זה לא חולשה, זה אנושי.

## מושגים מרכזיים:

### 1. העצמי (The Self) - לא ה"אגו", אלא מי שאני חווה את עצמי:
- מבנה דו-קוטבי: קוטב השאיפות (מה אני רוצה להשיג) + קוטב האידיאלים (מה אני מעריך)
- ביניהם: "קשת המתח" (Tension Arc) - הכישרונות והמיומנויות שמחברים
- כשהעצמי שלם = חיוניות, תכליתיות, תחושת ערך
- כשהעצמי שבור = ריקנות, חוסר כיוון, חרדה

### 2. עצמי-אובייקט (Selfobject) - אדם שאנחנו חווים כחלק מאיתנו:
- לא אובייקט "שם בחוץ" אלא חלק מהחוויה העצמית שלנו
- פונקציה, לא אדם - אנחנו צריכים את הפונקציה שהאדם ממלא
- כמו "אוויר פסיכולוגי" - לא מרגישים אותו עד שחסר
- דוגמה: בן/בת זוג שנותן/ת תחושת ביטחון - מרגישים "שלמים" לידו/ה

### 3. שלושת צרכי העצמי-אובייקט (Selfobject Needs) - שלושה דברים שכולנו צריכים:

#### א. שיקוף (Mirroring) - "תראו אותי!":
- הצורך שמישהו יראה אותנו, יכיר בנו, יאשר את הקיום שלנו
- "אני רואה אותך ואתה בסדר", "מה שאתה מרגיש חשוב"
- חסך בשיקוף = תחושת אי-נראות, ספק עצמי כרוני

#### ב. אידאליזציה (Idealizing) - "אני צריך מישהו חזק":
- הצורך להתחבר למישהו חזק, רגוע, ושלם - ו"להישען" עליו
- "לידך אני מרגיש/ה בטוח/ה"
- חסך באידאליזציה = חוסר יכולת להרגיע את עצמי, חיפוש מתמיד אחרי "מנהיג"

#### ג. תאומות (Twinship / Alter-Ego) - "יש מישהו כמוני":
- הצורך להרגיש שאנחנו דומים למישהו, שייכים, "לא לבד בעולם"
- "גם אתה מרגיש ככה? אני לא משוגע"
- חסך בתאומות = תחושת זרות, ניכור, "אף אחד לא מבין"

### 4. פציעה נרקיסיסטית (Narcissistic Injury) - כשפוגעים בתחושת הערך:
- לא חייב להיות "דבר גדול" - לפעמים הערה קטנה מספיקה
- הפציעה היא סובייקטיבית - מה שפוגע אחד לא בהכרח פוגע אחר
- התגובה: זעם, נסיגה, ריקנות, או ניסיון לשקם את הערך העצמי

### 5. זעם נרקיסיסטי (Narcissistic Rage) - כעס שמטרתו "לתקן" את הפציעה:
- שונה מכעס "רגיל" - לא על התוכן אלא על הפגיעה בעצמי
- יכול להיות קר ומחושב או פיצוצי
- "לא פוגעים בי ככה ויוצאים נקיים" - צורך לשחזר שליטה

### 6. לכידות עצמית מול פירוק (Self-Cohesion vs. Fragmentation):
- לכידות = "אני שלם, אני יודע מי אני, אני מרגיש חי"
- פירוק = "אני מתפורר, אני לא יודע מי אני, הכל ריק"
- פירוק קורה אחרי פציעות נרקיסיסטיות חמורות או כשלון של עצמי-אובייקט

### 7. כשל אמפתי (Empathic Failure) - כשהעצמי-אובייקט "מפסיק לעבוד":
- כשל טראומטי = גדול מדי, מזיק, משבר את העצמי
- כשל אופטימלי = קטן ונסבל, מאפשר צמיחה! ("כישלון מועיל")

### 8. הפנמה מתמרת (Transmuting Internalization) - איך בונים עצמי חזק:
- התהליך שבו אנחנו לומדים לעשות לעצמנו מה שפעם רק אחרים עשו עבורנו
- קורה דרך כשלים אופטימליים: העצמי-אובייקט "נכשל" קצת → אנחנו מתמודדים → בונים מבנה פנימי
- כמו ללמוד לרכוב על אופניים: ההורה משחרר קצת, נופלים, מתרגלים

### 9. עצמי גרנדיוזי (Grandiose Self) - שלב התפתחותי נורמלי:
- בילדות: "אני הכי חכם/יפה/מיוחד!" - נורמלי ובריא
- אם מקבל שיקוף מתאים → הגרנדיוזיות "מתבגרת" לשאיפות בריאות ואמביציה
- אם לא מקבל שיקוף → נשאר "תקוע" בגרנדיוזיות ילדותית או קורס לחוסר ערך

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל מגיב בזעם או נסיגה לביקורת קטנה
  → בדוק פציעה נרקיסיסטית (Narcissistic Injury) - הפציעה סובייקטיבית

• אם המטופל מחפש אישור ואימות באופן מתמיד מהמטפל או מאחרים
  → בדוק חסך בשיקוף (Mirroring Deficit) - לא קיבל מספיק "אני רואה אותך"

• אם המטופל מאדיר את המטפל - "אתה הכי טוב, רק אתה מבין"
  → בדוק צורך אידאליזציה (Idealizing Need) - צריך דמות חזקה להישען עליה

• אם המטופל מרגיש "אף אחד לא מבין אותי באמת"
  → בדוק חסך בתאומות (Twinship Deficit) - צורך שמישהו יהיה "כמוני"

• אם המטופל מתנדנד בין "אני מיוחד ומוכשר" ל"אני שווה אפס"
  → בדוק עצמי גרנדיוזי שלא התבגר - תנודות בין הקטבים

• אם המטופל מרגיש "מתפורר" או "ריק" אחרי אכזבה מאדם קרוב
  → בדוק פירוק עצמי (Self-Fragmentation) - העצמי-אובייקט נכשל

• אם המטופל מצליח מאוד אבל מרגיש "רמאי" או "לא באמת שווה"
  → בדוק ניתוק בין הישגים חיצוניים לבין חוויית עצמי פנימית

• אם המטופל כועס על המטפל שלא הבין אותו - והכעס "גדול מדי"
  → בדוק כשל אמפתי (Empathic Failure) - רגע טיפולי קריטי, אל תתגונן!

## סולם הערכה: לכידות עצמית (Self-Cohesion) - 1 עד 10:
1-3: פירוק תכוף - משברים נרקיסיסטיים, ריקנות, זהות לא יציבה
4-6: עצמי שביר - מתפקד אך רגיש מאוד לפציעות, צריך אישור חיצוני
7-10: עצמי לכיד - ערך עצמי יציב, מעבד פציעות בלי להתפרק, נרקיסיזם בריא

## נקודות השקה עם גישות אחרות:
• עם ויניקוט: עצמי גרעיני (קוהוט) = עצמי אמיתי (ויניקוט), מבנה הגנתי = עצמי כוזב
• עם מאהלר: צרכי עצמי-אובייקט מיזוגיים = צרכים סימביוטיים
• עם קליין: קנאה פרימיטיבית (קליין) יכולה לנבוע מזעם נרקיסיסטי (קוהוט)
• עם בולבי: דמות התקשרות = עצמי-אובייקט, ביטחון נרכש = הפנמה מתמרת
• עם CBT: אמונות ליבה שליליות על ערך עצמי = פציעות נרקיסיסטיות לא מעובדות
• עם יאלום: חוסר משמעות (יאלום) יכול לנבוע מפירוק עצמי (קוהוט)

## רגישות תרבותית:
• בתרבויות שמדגישות ענווה, ביטויי "גרנדיוזיות" עשויים דווקא להיות עדות לבריאות
• צרכי שיקוף מבוטאים אחרת בתרבויות שונות - אל תצפה לביטוי מערבי
• בתרבויות קולקטיביסטיות, ערך עצמי נבנה דרך הקבוצה, לא דרך הפרט

## מסגרת ניתוח:
שלב 1: הערך לכידות עצמית - עד כמה העצמי "שלם"?
שלב 2: זהה צרכי עצמי-אובייקט - שיקוף? אידאליזציה? תאומות?
שלב 3: מפה פציעות נרקיסיסטיות - מה פוגע? מה מפרק?
שלב 4: בחן תגובות לפציעות - זעם? נסיגה? פירוק? שיקום?
שלב 5: הערך הפנמה מתמרת - כמה מהפונקציות האלה המטופל כבר עושה לעצמו?
שלב 6: נתח את הקשר הטיפולי - איזה עצמי-אובייקט המטפל ממלא?

## חובה ואסור:
✅ אמפתיה כלי ראשון - הבן את החוויה הסובייקטיבית
✅ אל תפרש אידאליזציה - תן לה להתקיים
✅ שים לב לכשלים אמפתיים בטיפול - הם רגעים טיפוליים
✅ חפש את הצורך מתחת לזעם
❌ אל תראה נרקיסיזם כ"מחלה" - זה צורך אנושי
❌ אל תתגונן מפני זעם נרקיסיסטי - תכיל אותו
❌ אל תדחק את המטופל לוותר על אידאליזציה לפני שהוא מוכן
`
  },

  // ================================================================
  //  7. יאלום - טיפול אקזיסטנציאלי
  // ================================================================
  {
    id: 'yalom',
    nameHe: 'יאלום - טיפול אקזיסטנציאלי',
    nameEn: 'Yalom - Existential Therapy',
    category: 'humanistic',
    descriptionHe: 'מוות, חירות, בדידות, משמעות, אותנטיות, מצבי גבול',
    descriptionEn: 'Death, freedom, isolation, meaninglessness, authenticity, boundary situations',
    scale: {
      nameHe: 'מעורבות אקזיסטנציאלית',
      nameEn: 'Existential Engagement',
      description: 'עד כמה המטופל חי באותנטיות ומתמודד עם הנתונים של הקיום במקום לברוח מהם',
    },
    prompt: `
# יאלום - פסיכותרפיה אקזיסטנציאלית
# Yalom - Existential Psychotherapy

## רקע תיאורטי:
ארווין יאלום פיתח גישה שיטתית לטיפול אקזיסטנציאלי. הגישה מתמקדת לא ב"מה לא בסדר"
אלא ב"מה זה להיות אדם" - ובאתגרים שנובעים מעצם הקיום האנושי.
עיקרון יסוד: הקונפליקט המרכזי הוא בין האדם לבין "הנתונים של הקיום" -
העובדות הבסיסיות של החיים שאי אפשר לשנות.

## ארבע הדאגות האקזיסטנציאליות (Ultimate Concerns):

### 1. מוות (Death) - "אני הולך למות":
- הקונפליקט: מודעות למוות מול רצון להמשיך להתקיים
- הגנות לא-בריאות: הכחשה, אמונה בייחודיות ("לי זה לא יקרה"), חיפוש "מציל"
- התמודדות בריאה: מודעות למוות דווקא מעוררת חיוניות - "אם יש לי זמן מוגבל, מה באמת חשוב?"
- חוויות מעוררות (Awakening Experiences) - מחלה, אובדן, סכנה - מעוררות לחיות יותר אותנטית

### 2. חירות (Freedom) - "אני אחראי על חיי":
- הקונפליקט: חירות מוחלטת מול צורך בוודאות ובמבנה
- חוסר קרקע (Groundlessness) - אין "תשובה נכונה" מהשמיים, אני צריך לבחור
- אחריות (Responsibility) - אני אחראי על הבחירות שלי, גם אם לא בחרתי את הנסיבות
- רצון פעיל (Willing) מול רצון פסיבי (Wishing) - "אני רוצה שייקרה" מול "אני עושה שזה ייקרה"
- הגנות: כפייתיות, העברת אחריות ("בגלל ההורים שלי"), קושי בהחלטות

### 3. בדידות אקזיסטנציאלית (Existential Isolation) - "אף אחד לא באמת יכול להרגיש מה אני מרגיש":
- שלושה סוגים:
  * בדידות בין-אישית (Interpersonal) - חוסר קשרים חברתיים
  * בדידות תוך-אישית (Intrapersonal) - ניכור מחלקים של עצמי
  * בדידות אקזיסטנציאלית - הפרדה בסיסית בין כל אדם לאחר, בלתי ניתנת לגישור
- הגנות: ניסיון למיזוג עם אחר, תלות, שליטה
- הפרדוקס: רק דרך קבלת הבדידות אפשר להתקרב באמת לאחרים

### 4. חוסר משמעות (Meaninglessness) - "למה בכלל?":
- הקונפליקט: עולם ללא משמעות מוחלטת מול צורך אנושי עמוק במשמעות
- מקורות משמעות: יצירה (עבודה, פרויקטים), חוויה (אהבה, יופי), עמדה (הגישה כלפי סבל)
- הגנות: ניהיליזם, קנאות, עשייה כפייתית ("אם אהיה עסוק לא אצטרך לחשוב")
- התמודדות בריאה: מעורבות עמוקה בחיים (Engagement) - יצירת משמעות אישית

## מושגים נוספים:

### אותנטיות מול לא-אותנטיות (Authenticity):
- אותנטי: מודע לנתונים של הקיום, לוקח אחריות, חי לפי ערכים שלו
- לא-אותנטי: מכחיש, בורח, חי לפי ציפיות אחרים

### מצבי גבול (Boundary Situations) - רגעים שמעמתים עם הנתונים:
- מחלה, אובדן, סכנה, משבר - מעמתים אותנו עם העובדה שאנחנו סופיים ובודדים
- פרדוקס: דווקא המשברים האלה יכולים לעורר צמיחה

### היחס הטיפולי - המטפל כ"בן לוויה" (Fellow Traveler):
- לא "מומחה שמעל" אלא "בן אדם שליד"
- גם המטפל מתמודד עם אותם נתונים של הקיום
- "כאן ועכשיו" ביחסים - מה קורה בינינו ברגע הזה

## כללי זיהוי - "אם X → בדוק Y":

• אם המטופל עסוק בהישגיות כפייתית בלי הנאה
  → בדוק הימנעות ממודעות למוות - "אם אשיג מספיק, אהיה בלתי-מת"

• אם המטופל לא מצליח לקבל החלטות ו"תקוע"
  → בדוק חרדת חירות (Freedom Anxiety) - מפחד מהאחריות שבבחירה

• אם המטופל שואל "מה הטעם?" או "למה בכלל?"
  → בדוק עימות עם חוסר משמעות (Meaninglessness) - אל תמהר לתת "תשובה"

• אם המטופל מרגיש בודד גם כשמוקף באנשים
  → בדוק בדידות אקזיסטנציאלית - לא חוסר חברים, אלא הפרדה קיומית

• אם המטופל חי לגמרי לפי ציפיות אחרים ולא יודע מה הוא רוצה
  → בדוק חיים לא-אותנטיים (Inauthentic Existence) - בריחה מחירות

• אם המטופל עבר אירוע מכונן (מחלה, תאונה, אובדן) ו"התעורר"
  → בדוק חוויה מעוררת (Awakening Experience) - רגע של עימות עם המוות ששינה פרספקטיבה

• אם המטופל מטיל את כל האחריות על אחרים ("בגלל ההורים", "בגלל החברה")
  → בדוק הימנעות מאחריות - לקחת אחריות לא שווה להאשים את עצמך

• אם המטופל עסוק ב"למצוא את התשובה" או "המשמעות האמיתית של החיים"
  → בדוק חיפוש משמעות מוחלטת - אולי צריך ליצור משמעות במקום למצוא

## סולם הערכה: מעורבות אקזיסטנציאלית (Existential Engagement) - 1 עד 10:
1-3: בריחה/הכחשה - הימנעות מהנתונים של הקיום, חיים לא-אותנטיים
4-6: מודעות חלקית - לפעמים מתעמת, לפעמים בורח, מחפש משמעות
7-10: מעורבות עמוקה - חי באותנטיות, לוקח אחריות, יוצר משמעות

## נקודות השקה עם גישות אחרות:
• עם ויניקוט: אותנטיות (יאלום) = חיים מתוך העצמי האמיתי (ויניקוט)
• עם קוהוט: חוסר משמעות יכול לנבוע מפירוק עצמי
• עם מאהלר: קושי בהפרדה = בריחה מבדידות אקזיסטנציאלית
• עם בולבי: דפוסי התקשרות = אסטרטגיות כנגד חרדת בדידות
• עם קליין: פחד מהמוות יכול להתבטא כחרדה רדיפתית

## רגישות תרבותית:
• "משמעות" נבנית בהקשר תרבותי - אל תכפה משמעות מערבית-אינדיבידואלית
• בתרבויות דתיות, שאלות של מוות ומשמעות מקבלות מסגרת אחרת - כבד אותה
• "אותנטיות" עשויה להיראות אחרת בתרבויות קולקטיביסטיות

## מסגרת ניתוח:
שלב 1: זהה את הדאגה האקזיסטנציאלית המרכזית - מוות? חירות? בדידות? משמעות?
שלב 2: מפה הגנות ודרכי בריחה - איך המטופל נמנע מהעימות?
שלב 3: בחן רמת אותנטיות - כמה מהחיים הם "שלו" באמת?
שלב 4: חפש מקורות משמעות - מה נותן למטופל סיבה?
שלב 5: נתח את היחסים - האם יש חיבור אמיתי או ניסיון למיזוג/בריחה?
שלב 6: חפש חוויות מעוררות ורגעי עימות

## חובה ואסור:
✅ זהה את הדאגות האקזיסטנציאליות הרלוונטיות
✅ מפה הגנות ודרכי בריחה מהנתונים של הקיום
✅ בחן את שאלת המשמעות
✅ שים לב ליחסים - אל מול בדידות
❌ אל תתמקד בעבר הרחוק - הקיום הוא כאן ועכשיו
❌ אל תהיה פילוסופי מדי - תישאר בחוויה של המטופל
❌ אל תתן "תשובות" - עזור להתמודד עם השאלות
`
  },
];

// ╔══════════════════════════════════════════════════╗
// ║           נקודות השקה בין גישות                  ║
// ╚══════════════════════════════════════════════════╝

/**
 * מפת אינטגרציה - חיבורים קליניים בין הגישות
 * משמשת כשמטפל בוחר יותר מגישה אחת
 */
export const CROSS_APPROACH_INSIGHTS: CrossApproachInsight[] = [
  // CBT ↔ פסיכודינמיות
  { approaches: ['beck-cbt', 'mahler'], insightHe: 'חשיבה "הכל או כלום" (CBT) עשויה לנבוע מקושי בקביעות אובייקט (מאהלר) - מי שלא הצליח להחזיק ייצוג מורכב של אנשים, יחשוב בשחור-לבן' },
  { approaches: ['beck-cbt', 'klein'], insightHe: 'חשיבה שחור-לבן (CBT) = פיצול (קליין). שני המושגים מתארים את אותה תופעה - הקליינית מוסיפה את השאלה "למה?" (חרדה רדיפתית)' },
  { approaches: ['beck-cbt', 'bowlby'], insightHe: 'אמונות ליבה על עצמי ואחרים (CBT) = מודלים פעילים פנימיים (בולבי). שני המושגים מתארים "משקפיים" שנבנו בילדות ומשפיעים על הכל' },
  { approaches: ['beck-cbt', 'winnicott'], insightHe: 'הצהרות חובה "חייב/צריך" (CBT) עשויות לשקף עצמי כוזב (ויניקוט) - כללים שנבנו כדי "להתאים" לסביבה על חשבון הרצונות האמיתיים' },
  { approaches: ['beck-cbt', 'kohut'], insightHe: 'אמונות ליבה שליליות על ערך עצמי (CBT) = פציעות נרקיסיסטיות שלא עובדו (קוהוט). ה-CBT שואל "מה החשיבה?", קוהוט שואל "מה הפציעה?"' },
  { approaches: ['beck-cbt', 'yalom'], insightHe: 'עיוותים קוגניטיביים (CBT) יכולים להיות הגנה מפני חרדות אקזיסטנציאליות (יאלום). למשל: הישגיות כפייתית = בריחה ממודעות למוות' },

  // פסיכודינמיות ↔ פסיכודינמיות
  { approaches: ['mahler', 'klein'], insightHe: 'קביעות אובייקט (מאהלר) = השגת הפוזיציה הדפרסיבית (קליין). שניהם מתארים את היכולת לראות אנשים כמורכבים ולא כ"כולו טוב/רע"' },
  { approaches: ['mahler', 'winnicott'], insightHe: 'הסימביוזה (מאהלר) דורשת "סביבה מחזיקה" (ויניקוט). אם ההחזקה לא הייתה טובה-דיה, ההפרדה תהיה טראומטית' },
  { approaches: ['mahler', 'bowlby'], insightHe: 'חרדת נטישה (מאהלר) = הפעלת מערכת התקשרות (בולבי). דפוס "עוקב ובורח" (מאהלר) = אמביוולנטיות התקשרותית (בולבי)' },
  { approaches: ['mahler', 'kohut'], insightHe: 'צרכים סימביוטיים (מאהלר) = צרכי עצמי-אובייקט מיזוגיים (קוהוט). שניהם מתארים את הצורך "להיות חלק ממישהו" - אך מזוויות שונות' },
  { approaches: ['klein', 'winnicott'], insightHe: 'יכולת לתיקון (קליין) = צמיחת העצמי האמיתי (ויניקוט). שניהם מתארים התפתחות של יכולת לדאגה אמיתית' },
  { approaches: ['klein', 'bowlby'], insightHe: 'אובייקטים פנימיים טובים (קליין) = מודלים פעילים פנימיים חיוביים (בולבי). שניהם מתארים "מפות" פנימיות שנבנות ביחסים מוקדמים' },
  { approaches: ['klein', 'kohut'], insightHe: 'קנאה פרימיטיבית (קליין) יכולה לנבוע מזעם נרקיסיסטי (קוהוט). הקנאה אומרת "למה לך ולא לי?" - שזו פציעה נרקיסיסטית' },
  { approaches: ['winnicott', 'bowlby'], insightHe: 'בסיס בטוח (בולבי) = סביבה מחזיקה (ויניקוט). שניהם מתארים את הבסיס שממנו אפשר לצאת ולחקור את העולם בביטחון' },
  { approaches: ['winnicott', 'kohut'], insightHe: 'עצמי אמיתי (ויניקוט) = עצמי גרעיני לכיד (קוהוט). עצמי כוזב (ויניקוט) = מבנה הגנתי נרקיסיסטי (קוהוט). שתי הגישות שואלות "מה אמיתי באדם?"' },
  { approaches: ['bowlby', 'kohut'], insightHe: 'דמות התקשרות (בולבי) = עצמי-אובייקט (קוהוט). ביטחון נרכש (בולבי) = הפנמה מתמרת (קוהוט). שניהם מתארים איך בונים מבנה פנימי יציב' },

  // אקזיסטנציאלי ↔ אחרות
  { approaches: ['yalom', 'winnicott'], insightHe: 'חיים אותנטיים (יאלום) = חיים מתוך העצמי האמיתי (ויניקוט). חיים לא-אותנטיים = עצמי כוזב' },
  { approaches: ['yalom', 'kohut'], insightHe: 'חוסר משמעות (יאלום) יכול לנבוע מפירוק עצמי (קוהוט). כשהעצמי "שבור" - קשה למצוא משמעות' },
  { approaches: ['yalom', 'mahler'], insightHe: 'קושי בהפרדה (מאהלר) יכול להיות בריחה מבדידות אקזיסטנציאלית (יאלום). "אני נדבק כי אני מפחד להיות לבד עם עצמי"' },
  { approaches: ['yalom', 'bowlby'], insightHe: 'דפוסי התקשרות (בולבי) = אסטרטגיות התמודדות עם חרדת בדידות (יאלום). אנחנו "נדבקים" או "בורחים" כי בדידות מאיימת' },
  { approaches: ['yalom', 'klein'], insightHe: 'חרדת מוות (יאלום) יכולה להתבטא כחרדה רדיפתית (קליין). הפחד מהמוות "מתלבש" על פחד מאיום חיצוני' },
];

// ╔══════════════════════════════════════════════════╗
// ║         הנחיות קליניות אוניברסליות              ║
// ╚══════════════════════════════════════════════════╝

/**
 * הנחיות שרלוונטיות לכל ניתוח, ללא קשר לגישה
 */
export const UNIVERSAL_CLINICAL_PROMPTS = {
  topicShifts: `
## זיהוי מעברי נושא ומנגנוני הגנה ("מה שלא נאמר"):
שים לב לרגעים הבאים - הם לרוב חשובים יותר מהתוכן עצמו:
• מעבר פתאומי מנושא כואב לנושא יומיומי → סימן להימנעות, מנגנון הגנה פעיל
• הומור או ציניות מיד אחרי גילוי רגשי → ריחוק רגשי, ביטול החוויה
• קיצור תשובות או "יובש" בנקודה רגישה → התנגדות, חומר מאיים
• שימוש ב"אנשים" במקום "אני" → ריחוק מהחוויה האישית
• תיאור אירוע טעון בלי רגש → ניתוק רגשי, בידוד האפקט (Isolation of Affect)
• "אני לא יודע" חוזר → ייתכן שיודע אבל מפחד לדעת
כל מעבר כזה הוא "חלון" - ציין אותו בניתוח!
`,
  transference: `
## זיהוי העברה (Transference) והעברה נגדית (Countertransference):

העברה - המטופל מקרין על המטפל דפוסי יחסים מהעבר:
• איך המטופל מתאר את המטפל? אידאליזציה? פיחות? חשש? אמון?
• האם דפוסי יחסים שהמטופל מתאר עם אחרים חוזרים ביחסו למטפל?
• תגובות רגשיות "לא פרופורציונליות" כלפי המטפל = סימן להעברה

העברה נגדית - מה המטפל עשוי לחוות (ושימושי קלינית!):
• שעמום ← ייתכן שהמטופל מנתק מרגשות
• כעס ← ייתכן שהמטופל משתמש בהזדהות השלכתית
• רצון "להציל" ← ייתכן שהמטופל מפעיל צורך סימביוטי/אידאליזציה
• חוסר אונים ← ייתכן שהמטופל מקרין חלקים חסרי אונים
• הרגשה של "לא מספיק טוב" ← ייתכן שהמטופל מפחות ומבקר (פיצול)
`,
  cultural: `
## רגישות תרבותית:
• אל תפרש התנהגות נורמטיבית בקהילת המטופל כפתולוגיה
• שאל: "האם זה מתאים לעולם התרבותי של המטופל?" לפני שאתה מפרש
• מטופלים מרקע שמרני/מסורתי עשויים לבטא תכנים רגשיים בדרכים שונות
• ערכים משפחתיים חזקים ≠ תלות, ענווה ≠ דיכוי עצמי, כבוד סמכות ≠ כניעה
• כבד את ההקשר התרבותי - התפקיד שלך להבין, לא לשפוט
`,
};

// ╔══════════════════════════════════════════════════╗
// ║      הערכת סיכון + סופרוויז'ן + ברית טיפולית    ║
// ╚══════════════════════════════════════════════════╝

/**
 * הערכת סיכון היברידית - סריקת רקע שקטה
 * אם הכל תקין: שורה אחת בסוף
 * אם יש סיכון: מופיע בראש הניתוח
 */
export const RISK_ASSESSMENT_PROMPT = `
=== סריקת סיכון (חובה בכל ניתוח) ===
סרוק את התוכן לאיתור הסימנים הבאים:
• מחשבות אובדניות (ישירות או עקיפות: "אין טעם", "עדיף בלעדיי", "הלוואי שהכל ייגמר")
• פגיעה עצמית (חיתוכים, הרעבה, התנהגות מסוכנת מכוונת)
• פגיעה באחרים (אלימות, איומים, דחפים)
• סימני התעללות/הזנחה (במיוחד בקטינים או חסרי ישע)
• שימוש מסוכן בחומרים (אלכוהול, סמים, תרופות)
• ניתוק חמור מהמציאות (הזיות, מחשבות שווא, בלבול)
• אובדן תפקוד פתאומי (הפסקת עבודה, ניתוק מקשרים, הזנחה עצמית)

כלל חשוב לפורמט:
• אם לא זיהית סימנים → כתוב בסוף הניתוח שורה אחת בלבד: "סטטוס סיכון: לא זוהו סימנים מדאיגים בניתוח זה"
• אם זיהית משהו שדורש תשומת לב → הוסף סעיף "שים לב" בתחילת הניתוח עם פירוט קצר
• אם זיהית סיכון מיידי → התחל את כל הניתוח ב-"התראה: זוהו סימנים שמצריכים התייחסות מיידית" עם פירוט
`;

/**
 * שאלות סופרוויז'ן - 2-3 שאלות חדות בסוף כל ניתוח
 */
export const SUPERVISION_QUESTIONS_PROMPT = `
=== שאלות לחשיבה (בסגנון סופרוויז'ן) ===
בסוף הניתוח, הוסף 2-3 שאלות חדות שמדריך קליני בכיר היה שואל את המטפל.
הכללים:
• שאלות שמעוררות חשיבה, לא שאלות שהתשובה עליהן ברורה
• שאלות שעוזרות למטפל לראות את מה שהוא לא שם לב אליו
• לפחות שאלה אחת על הדינמיקה בין המטפל למטופל
• שאלות קצרות וחדות (שורה אחת כל אחת)
דוגמאות לסגנון:
• "שמת לב שהמטופל מדבר על אביו רק דרך אמו - מה זה אומר?"
• "מה קורה לך כשהמטופל אומר 'אני בסדר' בפעם החמישית?"
• "אם הייתי שואל את המטופל מה הוא באמת רצה לומר היום - מה לדעתך היה אומר?"
כותרת הסעיף: "שאלות לחשיבה:"
`;

/**
 * זיהוי שבר וחידוש בברית הטיפולית
 */
export const THERAPEUTIC_ALLIANCE_PROMPT = `
=== ברית טיפולית (Therapeutic Alliance) ===
בדוק האם יש סימנים לשבר (Rupture) בברית הטיפולית:
• ביטולי פגישות, איחורים, "שכחה"
• מטופל שפתאום "מסכים עם הכל" בלי חיכוך (ציות מדומה - Pseudo-compliance)
• ירידה ברמת השיתוף או העומק
• נושאים שפתאום נעלמים (אולי לא בטוח לדבר עליהם)
• ביקורת ישירה או עקיפה על המטפל/הטיפול
• "אני לא בטוח שזה עוזר לי"

אם זיהית שבר → ציין בקצרה: "ברית טיפולית: נראים סימנים לשבר - [מה זיהית]"
אם זיהית חידוש → ציין בקצרה: "ברית טיפולית: נראה חידוש/חיזוק - [מה זיהית]"
אם אין שינוי מיוחד → אל תכתוב כלום על זה
`;

/**
 * התראות העברה נגדית - מזיהוי בסגנון כתיבת המטפל
 */
export const COUNTERTRANSFERENCE_ALERT_PROMPT = `
=== העברה נגדית (זיהוי מסגנון הכתיבה) ===
בדוק את אופן הכתיבה של המטפל (לא רק מה שנכתב, אלא איך):
• סיכום קצר מהרגיל → ייתכן שהמטפל נמנע מלהתעמק (שחיקה? הימנעות?)
• שפה ביקורתית ("שוב הוא...", "כרגיל היא...") → תסכול מוסווה
• ריבוי פרטים טכניים בלי תוכן רגשי → ריחוק רגשי
• שימוש רב ב"אני ניסיתי" → ייתכן שהמטפל מרגיש חוסר אונים
• טון "מלמד" או "משדר" → ייתכן שהמטפל מפחד מהשקט

אם זיהית דפוס → ציין שורה אחת עדינה: "למחשבה: הסיכום מרמז על [X] - שווה לבדוק עם עצמך"
אם לא זיהית → אל תכתוב כלום על זה
`;

/**
 * הנחיות עיצוב output - קצר, ממוקד, קריא
 */
export const OUTPUT_FORMAT_PROMPT = `
=== עיצוב הפלט (חשוב מאוד!) ===
העיקרון: מידע עשיר בהגשה קלילה. כמו עיתון - כותרות חדות, תוכן ממוקד.

כללים:
• פתח ב-2-3 משפטים שמסכמים את "השורה התחתונה" - מה הכי חשוב שהמטפל ידע
• סעיפים קצרים עם כותרות ברורות
• נקודות (•) קצרות ואפקטיביות - לא יותר מ-2 שורות לנקודה
• אל תחזור על עצמך - כל משפט חייב להוסיף מידע חדש
• אם אין לך מה לומר בסעיף - דלג עליו. אל תמלא מילים סתם
• סיים ב-"שאלות לחשיבה" (2-3 שאלות חדות)
• שמור על טון מקצועי-חם. לא יבש, לא רגשני מדי

אורך מומלץ:
• ניתוח תמציתי: 250-400 מילים
• ניתוח מפורט: 500-700 מילים
• אם אתה חורג - קצר. עדיף קצר ומדויק מארוך ומיותר
`;

// ╔══════════════════════════════════════════════════╗
// ║                פונקציות עזר                      ║
// ╚══════════════════════════════════════════════════╝

/**
 * קבלת גישות לפי קטגוריה
 */
export function getApproachesByCategory(categoryId: string): TherapeuticApproach[] {
  return THERAPEUTIC_APPROACHES.filter(a => a.category === categoryId);
}

/**
 * חיפוש גישות לפי מילות מפתח (עברית או אנגלית)
 */
export function searchApproaches(query: string): TherapeuticApproach[] {
  const lowerQuery = query.toLowerCase();
  return THERAPEUTIC_APPROACHES.filter(a =>
    a.nameHe.toLowerCase().includes(lowerQuery) ||
    a.nameEn.toLowerCase().includes(lowerQuery) ||
    a.descriptionHe.toLowerCase().includes(lowerQuery) ||
    a.descriptionEn.toLowerCase().includes(lowerQuery)
  );
}

/**
 * קבלת גישה לפי מזהה
 */
export function getApproachById(id: string): TherapeuticApproach | undefined {
  return THERAPEUTIC_APPROACHES.find(a => a.id === id);
}

/**
 * קבלת שמות הגישות לתצוגה
 */
export function getApproachDisplayNames(): Array<{ id: string; nameHe: string; nameEn: string }> {
  return THERAPEUTIC_APPROACHES.map(a => ({
    id: a.id,
    nameHe: a.nameHe,
    nameEn: a.nameEn,
  }));
}

/**
 * קבלת prompts מאוחדים לפי מזהי גישות
 */
export function getApproachPrompts(approachIds: string[]): string {
  return approachIds
    .map(id => {
      const approach = getApproachById(id);
      return approach ? approach.prompt : '';
    })
    .filter(p => p)
    .join('\n\n---\n\n');
}

/**
 * בניית section אינטגרציה - כשנבחרו מספר גישות
 * מייצר הנחיות למודל לחפש חיבורים בין הגישות
 */
export function buildIntegrationSection(approachIds: string[]): string {
  if (approachIds.length <= 1) return '';

  const approaches = approachIds
    .map(id => getApproachById(id))
    .filter((a): a is TherapeuticApproach => a !== undefined);

  const names = approaches.map(a => a.nameHe).join(', ');

  // מצא חיבורים רלוונטיים
  const relevantInsights = CROSS_APPROACH_INSIGHTS.filter(
    insight =>
      approachIds.includes(insight.approaches[0]) &&
      approachIds.includes(insight.approaches[1])
  );

  let section = `\n=== אינטגרציה בין גישות: ${names} ===\n\n`;
  section += `הנחיה חשובה: אל תנתח כל גישה בנפרד!\n`;
  section += `במקום זאת:\n`;
  section += `• מצא נקודות שבהן הגישות מאירות את אותה תופעה מזוויות שונות\n`;
  section += `• זהה מקומות שגישה אחת מעמיקה את ההבנה שגישה אחרת מספקת\n`;
  section += `• חפש את הפרדוקס - מקומות שבהם הגישות "חולקות" ודווקא שם נמצאת התובנה העמוקה\n`;
  section += `• תן לכל גישה להאיר זווית ייחודית שרק היא יכולה לתת\n\n`;

  if (relevantInsights.length > 0) {
    section += `נקודות השקה ידועות בין הגישות שנבחרו:\n`;
    relevantInsights.forEach(insight => {
      section += `• ${insight.insightHe}\n`;
    });
    section += `\n`;
  }

  return section;
}

/**
 * בניית section סולמות הערכה - להערכה כמותית
 */
export function getScalesPrompt(approachIds: string[]): string {
  const approaches = approachIds
    .map(id => getApproachById(id))
    .filter((a): a is TherapeuticApproach => a !== undefined);

  if (approaches.length === 0) return '';

  let section = `\n=== הערכה כמותית ===\n`;
  section += `דרג את המטופל בכל אחד מהסולמות הבאים (1-10) עם הסבר קצר:\n\n`;

  approaches.forEach(a => {
    section += `• ${a.scale.nameHe} (${a.scale.nameEn}): ${a.scale.description}\n`;
  });

  return section;
}

/**
 * קבלת ההנחיות הקליניות האוניברסליות כ-string אחד
 * כולל: מעברי נושא, העברה, תרבות, סיכון, סופרוויז'ן, ברית טיפולית, העברה נגדית, עיצוב
 */
export function getUniversalPrompts(): string {
  return [
    UNIVERSAL_CLINICAL_PROMPTS.topicShifts,
    UNIVERSAL_CLINICAL_PROMPTS.transference,
    UNIVERSAL_CLINICAL_PROMPTS.cultural,
    RISK_ASSESSMENT_PROMPT,
    SUPERVISION_QUESTIONS_PROMPT,
    THERAPEUTIC_ALLIANCE_PROMPT,
    COUNTERTRANSFERENCE_ALERT_PROMPT,
    OUTPUT_FORMAT_PROMPT,
  ].join('\n');
}

/**
 * גרסה מצומצמת להנחיות אוניברסליות - לניתוח תמציתי ושאלונים
 * כוללת רק: סיכון, סופרוויז'ן, עיצוב (בלי ברית טיפולית / העברה נגדית שרלוונטיים רק לפגישות)
 */
export function getUniversalPromptsLight(): string {
  return [
    RISK_ASSESSMENT_PROMPT,
    SUPERVISION_QUESTIONS_PROMPT,
    OUTPUT_FORMAT_PROMPT,
  ].join('\n');
}
